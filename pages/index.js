import Head from 'next/head';
import Layout from '../components/layout';
import { Typography } from '@mui/material';
import Box from '@mui/material/Box';
import Stack from '@mui/material/Stack';
import Button from '@mui/material/Button';
import { useState } from 'react';
import Image from 'next/image';

export default function Home() {
  const [selectedImage, setSelectedImage] = useState(null)

  const encodeImageAsURL = async (file) => {
    var reader = new FileReader()
    reader.onloadend = function () {
      console.log("RESULT", reader.result)
    }
    reader.readAsDataURL(file)
    return reader.result
  }

  // const toBase64 = (file) =>
  //   new Promise((resolve, reject) => {
  //     const reader = new FileReader();
  //     reader.readAsDataURL(file);
  //     reader.onload = () => resolve(reader.result);
  //     reader.onerror = (error) => reject(error);
  //   });

  return (
    <Layout>
      <Head>
        <title>Home</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Typography variant="h4">Home</Typography>
      <Typography component="div">
        Your company is <Box sx={{ fontWeight: "bold" }} display="inline"> Cap3</Box>
      </Typography>
      <Typography component="div">
        Number of employee in your company using this app is <Box sx={{ fontWeight: "bold" }} display="inline">10</Box>
      </Typography>
      <Stack
        direction={{ xs: 'column', sm: 'row' }}
        spacing={{ xs: 1, sm: 2, md: 4 }}
      >
        <Typography component="div">Happy: <Box sx={{ fontWeight: "bold" }} display="inline">7</Box> </Typography>
        <Typography component="div">Sad: <Box sx={{ fontWeight: "bold" }} display="inline">1</Box> </Typography>
        <Typography component="div">Angry: <Box sx={{ fontWeight: "bold" }} display="inline">1</Box> </Typography>
        <Typography component="div">Confused: <Box sx={{ fontWeight: "bold" }} display="inline">1</Box> </Typography>
      </Stack>
      {selectedImage == null ?
        <p>No Image selected yet</p> :
        <Image alt="not fount" width="256" height="256" src={URL.createObjectURL(selectedImage)} />
      }
      <br />
      <Stack direction="row" spacing={2}>
        <input
          accept="image/*"
          type="file"
          name="myImage"
          id="image-button-file"
          onChange={(event) => {
            let file = event.target.files[0]
            setSelectedImage(file)
            encodeImageAsURL(file)
            // let imageURL = encodeImageAsURL(file)
            // console.log(imageURL)
            // console.log(encodeImageAsURL(file))
          }}
          hidden
        />
        <label htmlFor="image-button-file">
          <Button variant="contained" component="span">Upload</Button>
        </label>
        <Button variant="contained" onClick={() => setSelectedImage(null)}>Remove image</Button>
      </Stack>


    </Layout>
  )
}